<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Adil Shamim - macOS Portfolio</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Scrollbar Hiding */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        body {
            margin: 0;
            overflow: hidden;
            touch-action: none; /* Prevents scrolling the whole page on mobile */
            -webkit-tap-highlight-color: transparent;
        }
        /* Allow scrolling inside windows */
        .window-content {
            touch-action: auto;
            -webkit-overflow-scrolling: touch;
        }
        /* Typing Indicator Animation */
        .typing-dot {
            animation: typing 1.4s infinite ease-in-out both;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Icons ---
        const IconWrapper = ({ size = 24, className, children, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );

        const Terminal = (props) => <IconWrapper {...props}><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></IconWrapper>;
        const User = (props) => <IconWrapper {...props}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconWrapper>;
        const Briefcase = (props) => <IconWrapper {...props}><rect x="2" y="7" width="20" height="14" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></IconWrapper>;
        const Mail = (props) => <IconWrapper {...props}><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></IconWrapper>;
        const Cpu = (props) => <IconWrapper {...props}><rect x="4" y="4" width="16" height="16" rx="2" ry="2"/><rect x="9" y="9" width="6" height="6"/><line x1="9" y1="1" x2="9" y2="4"/><line x1="15" y1="1" x2="15" y2="4"/><line x1="9" y1="20" x2="9" y2="23"/><line x1="15" y1="20" x2="15" y2="23"/><line x1="20" y1="9" x2="23" y2="9"/><line x1="20" y1="14" x2="23" y2="14"/><line x1="1" y1="9" x2="4" y2="9"/><line x1="1" y1="14" x2="4" y2="14"/></IconWrapper>;
        const X = (props) => <IconWrapper {...props}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></IconWrapper>;
        const Minus = (props) => <IconWrapper {...props}><line x1="5" y1="12" x2="19" y2="12"/></IconWrapper>;
        const Maximize2 = (props) => <IconWrapper {...props}><polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" y1="3" x2="14" y2="10"/><line x1="3" y1="21" x2="10" y2="14"/></IconWrapper>;
        const Wifi = (props) => <IconWrapper {...props}><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" y1="20" x2="12.01" y2="20"/></IconWrapper>;
        const Battery = (props) => <IconWrapper {...props}><rect x="1" y="6" width="18" height="12" rx="2" ry="2"/><line x1="23" y1="13" x2="23" y2="11"/></IconWrapper>;
        const Search = (props) => <IconWrapper {...props}><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></IconWrapper>;
        const Command = (props) => <IconWrapper {...props}><path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"/></IconWrapper>;
        const Github = (props) => <IconWrapper {...props}><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></IconWrapper>;
        const Linkedin = (props) => <IconWrapper {...props}><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></IconWrapper>;
        const Globe = (props) => <IconWrapper {...props}><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></IconWrapper>;
        const Award = (props) => <IconWrapper {...props}><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></IconWrapper>;
        const ExternalLink = (props) => <IconWrapper {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></IconWrapper>;
        const CalendarIcon = (props) => <IconWrapper {...props}><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></IconWrapper>;
        const MessageCircle = (props) => <IconWrapper {...props}><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/></IconWrapper>;
        const Send = (props) => <IconWrapper {...props}><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></IconWrapper>;
        const Sparkles = (props) => <IconWrapper {...props}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 5H5"/><path d="M3 7V3"/><path d="M7 3H3"/></IconWrapper>;

        // --- Custom SVGs ---
        const KaggleIcon = ({ size = 16, className }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className} xmlns="http://www.w3.org/2000/svg"><path d="M18.825 23.859c-.022.092-.117.141-.281.141h-3.139c-.187 0-.351-.082-.492-.248l-5.178-6.589-1.447 1.374v5.113c0 .214-.135.35-.406.35H4.627c-.248 0-.373-.136-.373-.35V.35c0-.215.125-.351.373-.351h3.255c.271 0 .406.136.406.351v15.348l6.386-7.21c.169-.181.35-.282.539-.282h3.21c.234 0 .351.129.351.375 0 .123-.053.228-.158.328l-5.87 6.167 6.244 8.182c.118.158.164.305.135.451z"/></svg>);
        const XIcon = ({ size = 16, className }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className} xmlns="http://www.w3.org/2000/svg"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>);
        const MediumIcon = ({ size = 16, className }) => (<svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className} xmlns="http://www.w3.org/2000/svg"><path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42-1.87 0-3.39-2.88-3.39-6.42s1.52-6.42 3.39-6.42 3.38 2.88 3.38 6.42M24 12c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75C23.47 6.25 24 8.83 24 12z"/></svg>);

        // --- Resume Data ---
        const RESUME_DATA = {
            personal: {
                name: "Adil Shamim",
                role: "Machine Learning Engineer",
                phone: "+880 1321073452",
                email: "adilshamim696@gmail.com",
                website: "adilshamim.me",
                linkedin: "adilshamim8",
                github: "AdilShamim8",
                kaggle: "adilshamim8",
                twitter: "adil_shamim8",
                medium: "https://adilshamim8.medium.com/",
                location: "Dhaka, Bangladesh",
                avatar: "https://adilshamim.me/image/Adil.jpeg",
                summary: "I'm a Machine Learning Engineer and Deep Learning Enthusiast specializing in creating intelligent systems and data-driven solutions. With over two years of experience, I build practical ML systems—pipelines, Dockerized services, and tracked experiments. I combine analytical thinking and technical skills to deliver outstanding results."
            },
            skills: {
                languages: ["Python", "SQL"],
                modeling: ["TensorFlow", "scikit-learn", "XGBoost", "LightGBM", "CatBoost"],
                mlops: ["MLflow", "ZenML", "Docker", "FastAPI"],
                tools: ["Jupyter", "Git", "VSCode", "Cursor"]
            },
            experience: [
                {
                id: 1,
                role: "Freelance Machine Learning Engineer",
                company: "Self-employed",
                date: "July 2025 - Present",
                desc: "Created a hybrid recommendation system for a local business (collaborative + content-based); deployed results and achieved a 10% sales increase in 3 months."
                },
                {
                id: 2,
                role: "Kaggle Expert",
                company: "Kaggle Competitions",
                date: "Ongoing",
                desc: "Completed 15 competitions focusing on robust modeling. Ranked Top 1% in Predicting Road Accident Risk and Top 2% in Predicting Beats-per-Minute of Songs."
                }
            ],
            projects: [
                {
                title: "Prices Predictor System",
                link: "https://github.com/AdilShamim8/Prices-Predictor-System",
                tech: ["ZenML", "MLflow", "XGBoost", "FastAPI", "Docker"],
                desc: "End-to-end price-prediction pipeline. Features include data preprocessing, model training, and deployment with automated tracking of experiments."
                },
                {
                title: "Toolly Studio",
                link: "https://github.com/AdilShamim8/Toolly-Studio",
                tech: ["Streamlit", "Bria AI", "Python", "Docker"],
                desc: "Streamlit app generating professional product ads using Bria AI. Features intelligent prompt engineering and batch processing capabilities."
                },
                {
                title: "Resume Screening",
                link: "https://github.com/AdilShamim8/Resume-Screening",
                tech: ["spaCy", "SBERT", "FAISS", "Flask"],
                desc: "AI-powered tool for efficient candidate selection. Utilizes NLP to parse, analyze, and rank resumes based on job requirements."
                },
                {
                title: "Book Recommender System",
                link: "https://github.com/AdilShamim8/Book-Recommender-System",
                tech: ["ALS", "TF-IDF", "Flask"],
                desc: "Hybrid recommendation system (collaborative + content-based). Features personalized recommendations and user preference analysis."
                },
                {
                title: "Sentiment Analysis",
                link: "https://github.com/AdilShamim8/Sentiment-Analysis",
                tech: ["Python", "NLP", "Streamlit", "Text Classification"],
                desc: "Powerful NLP application that performs sentiment analysis on text input. Features a clean user interface and real-time analysis capabilities."
                },
                {
                title: "Toolly",
                link: "https://github.com/AdilShamim8/Toolly",
                tech: ["Python", "AI", "NLP", "Automation"],
                desc: "AI-powered productivity suite that automates daily tasks. Features intelligent text processing, automated content generation, and smart task management."
                }
            ],
            education: {
                degree: "Computer Science and Engineering",
                institution: "BNIST",
                coursework: "Linear Algebra, Calculus, Probability & Statistics, Data Structures, OS, Computer Architecture"
            },
            certifications: [
                "Machine Learning - Stanford University",
                "CS50: Intro to Computer Science - Harvard",
                "Python for Data Science - IBM",
                "Career Essentials in GenAI - Microsoft",
                "Azure ML Studio Pipelines"
            ]
        };

        const WindowButton = ({ color, onClick, disabled }) => (
            <button onClick={(e) => { e.stopPropagation(); !disabled && onClick && onClick(); }} className={`w-3 h-3 rounded-full mr-2 flex items-center justify-center group ${color} ${disabled ? 'cursor-default' : ''}`}>
                <span className={`opacity-0 group-hover:opacity-100 text-[8px] font-bold text-black/60`}>
                {color.includes('red') && <X size={6} />}
                {color.includes('yellow') && <Minus size={6} />}
                {color.includes('green') && <Maximize2 size={6} />}
                </span>
            </button>
        );

        const DraggableWindow = ({ app, onClose, onMinimize, onFocus, isActive, zIndex, isMinimized }) => {
            const [position, setPosition] = useState({ x: 0, y: 0 });
            const [isDragging, setIsDragging] = useState(false);
            const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });
            const [isMaximized, setIsMaximized] = useState(false);
            const [isHidden, setIsHidden] = useState(false);
            const [windowSize, setWindowSize] = useState({ width: window.innerWidth, height: window.innerHeight });
            const windowRef = useRef(null);

            useEffect(() => {
                const handleResize = () => setWindowSize({ width: window.innerWidth, height: window.innerHeight });
                window.addEventListener('resize', handleResize);
                
                const isMobile = window.innerWidth < 768;
                setPosition({ 
                    x: isMobile ? 10 : Math.random() * 50 + 50, 
                    y: isMobile ? 40 : Math.random() * 50 + 50 
                });

                return () => window.removeEventListener('resize', handleResize);
            }, []);

            const handleMouseDown = (e) => {
                if (isMaximized) return; 
                if (e.target.closest('.window-content')) return;
                setIsDragging(true);
                setDragOffset({ x: e.clientX - position.x, y: e.clientY - position.y });
                onFocus(app.id);
            };

            const handleTouchStart = (e) => {
                if (isMaximized) return;
                if (e.target.closest('.window-content')) return;
                setIsDragging(true);
                const touch = e.touches[0];
                setDragOffset({ x: touch.clientX - position.x, y: touch.clientY - position.y });
                onFocus(app.id);
            };

            useEffect(() => {
                const handleMouseMove = (e) => {
                    if (isDragging) {
                        const newX = Math.max(0, Math.min(window.innerWidth - 50, e.clientX - dragOffset.x));
                        const newY = Math.max(25, Math.min(window.innerHeight - 50, e.clientY - dragOffset.y));
                        setPosition({ x: newX, y: newY });
                    }
                };
                const handleTouchMove = (e) => {
                    if (isDragging) {
                        const touch = e.touches[0];
                        const newX = Math.max(0, Math.min(window.innerWidth - 50, touch.clientX - dragOffset.x));
                        const newY = Math.max(25, Math.min(window.innerHeight - 50, touch.clientY - dragOffset.y));
                        setPosition({ x: newX, y: newY });
                    }
                };
                const handleEnd = () => setIsDragging(false);

                if (isDragging) {
                    window.addEventListener('mousemove', handleMouseMove);
                    window.addEventListener('mouseup', handleEnd);
                    window.addEventListener('touchmove', handleTouchMove, { passive: false });
                    window.addEventListener('touchend', handleEnd);
                }
                return () => {
                    window.removeEventListener('mousemove', handleMouseMove);
                    window.removeEventListener('mouseup', handleEnd);
                    window.removeEventListener('touchmove', handleTouchMove);
                    window.removeEventListener('touchend', handleEnd);
                };
            }, [isDragging, dragOffset]);

            useEffect(() => {
                if (isMinimized) {
                    const timer = setTimeout(() => setIsHidden(true), 300);
                    return () => clearTimeout(timer);
                } else {
                    setIsHidden(false);
                }
            }, [isMinimized]);

            const toggleMaximize = () => {
                setIsMaximized(!isMaximized);
                onFocus(app.id);
            };

            const currentWidth = windowSize.width < 768 ? '95vw' : (app.width || '600px');
            const currentHeight = windowSize.width < 768 ? '80vh' : (app.height || '400px');

            const windowStyle = isMaximized 
                ? { top: 0, left: 0, width: '100%', height: '100%', borderRadius: 0, transform: 'none' }
                : { transform: `translate(${position.x}px, ${position.y}px)`, width: currentWidth, height: currentHeight, maxWidth: '100vw', maxHeight: '90vh' };

            return (
                <div style={{...windowStyle, zIndex, display: isHidden ? 'none' : 'flex'}}
                    className={`absolute flex-col overflow-hidden shadow-2xl border border-white/20 transition-all duration-300 ease-in-out bg-white dark:bg-[#1e1e1e] ${!isMaximized && 'rounded-xl'} ${isActive ? 'shadow-2xl ring-1 ring-white/10' : 'shadow-md opacity-90'} ${isMinimized ? 'opacity-0 scale-90 pointer-events-none' : 'opacity-100 scale-100'}`}
                    onMouseDown={() => onFocus(app.id)}
                    onTouchStart={() => onFocus(app.id)}
                >
                    <div className="h-8 bg-[#e3e3e3] dark:bg-[#2d2d2d] flex items-center px-4 select-none cursor-default touch-none" onMouseDown={handleMouseDown} onTouchStart={handleTouchStart} onDoubleClick={toggleMaximize}>
                        <div className="flex items-center gap-1.5">
                            <WindowButton color="bg-red-500 hover:bg-red-600" onClick={() => onClose(app.id)} />
                            <WindowButton color="bg-yellow-500 hover:bg-yellow-600" onClick={() => onMinimize(app.id)} />
                            <WindowButton color="bg-green-500 hover:bg-green-600" onClick={toggleMaximize} />
                        </div>
                        <div className="flex-1 text-center text-xs font-semibold text-gray-600 dark:text-gray-300 truncate px-2">{app.title}</div>
                        <div className="w-14"></div>
                    </div>
                    <div className="flex-1 bg-white/90 dark:bg-[#1e1e1e]/95 backdrop-blur-md overflow-y-auto window-content scrollbar-hide">
                        {app.content}
                    </div>
                </div>
            );
        };

        // --- App Content Components ---

        const FinderContent = () => (
            <div className="flex flex-col md:flex-row h-full text-gray-800 dark:text-gray-200">
                <div className="w-full md:w-48 bg-gray-100/50 dark:bg-gray-800/30 border-b md:border-b-0 md:border-r border-gray-200 dark:border-gray-700 p-4 flex flex-row md:flex-col gap-2 overflow-x-auto md:overflow-visible scrollbar-hide flex-shrink-0">
                    <div className="text-[10px] uppercase font-bold text-gray-400 mb-1 hidden md:block">Favorites</div>
                    <div className="flex items-center gap-2 p-1 bg-blue-500/10 text-blue-600 rounded text-sm font-medium whitespace-nowrap"><User size={16}/> About Me</div>
                    <div className="flex items-center gap-2 p-1 text-gray-500 hover:bg-gray-200/50 rounded text-sm cursor-not-allowed whitespace-nowrap"><Briefcase size={16}/> Documents</div>
                    <div className="flex items-center gap-2 p-1 text-gray-500 hover:bg-gray-200/50 rounded text-sm cursor-not-allowed whitespace-nowrap"><Search size={16}/> Recents</div>
                </div>
                <div className="flex-1 p-4 md:p-8 overflow-y-auto">
                    <div className="flex flex-col items-center mb-6">
                        <div className="w-20 h-20 md:w-24 md:h-24 rounded-full bg-gray-200 mb-4 overflow-hidden shadow-lg border-2 border-white">
                            <img src={RESUME_DATA.personal.avatar} alt="Avatar" className="w-full h-full object-cover"/>
                        </div>
                        <h1 className="text-xl md:text-2xl font-bold text-gray-900 dark:text-white text-center">{RESUME_DATA.personal.name}</h1>
                        <p className="text-sm text-gray-500 text-center">{RESUME_DATA.personal.role}</p>
                        <p className="text-xs text-gray-400 mt-1 text-center">{RESUME_DATA.personal.location}</p>
                    </div>
                    <div className="space-y-6">
                        <section><h3 className="text-xs font-bold uppercase text-gray-400 mb-2 border-b pb-1">Overview</h3><p className="text-sm leading-relaxed text-justify">{RESUME_DATA.personal.summary}</p></section>
                        <section><h3 className="text-xs font-bold uppercase text-gray-400 mb-2 border-b pb-1">Education</h3><div className="text-sm"><p className="font-semibold">{RESUME_DATA.education.degree}</p><p className="text-gray-500">{RESUME_DATA.education.institution}</p><p className="text-xs text-gray-400 mt-1 italic">Relevant Coursework: {RESUME_DATA.education.coursework}</p></div></section>
                        <section><h3 className="text-xs font-bold uppercase text-gray-400 mb-2 border-b pb-1">Achievements</h3><ul className="text-sm list-disc pl-4 space-y-1"><li>Founder of Toolly - AI productivity tool</li><li>Published Mental Health Dataset on Kaggle</li><li>Active Open Source Contributor</li></ul></section>
                    </div>
                </div>
            </div>
        );

        const TerminalContent = () => (
            <div className="h-full bg-[#1e1e1e] text-green-400 p-4 font-mono text-xs md:text-sm overflow-y-auto">
                <div className="mb-4"><span className="text-blue-400">adil@macbook</span>:<span className="text-blue-300">~</span>$ list_skills.py</div>
                <div className="grid grid-cols-1 gap-6 pl-2">
                    <div><div className="text-white mb-1 underline decoration-green-600 decoration-2">Languages & Data:</div><div className="flex flex-wrap gap-2">{RESUME_DATA.skills.languages.map(s => <span key={s}>• {s}</span>)}</div></div>
                    <div><div className="text-white mb-1 underline decoration-green-600 decoration-2">Modeling & DL:</div><div className="flex flex-wrap gap-2">{RESUME_DATA.skills.modeling.map(s => <span key={s}>• {s}</span>)}</div></div>
                    <div><div className="text-white mb-1 underline decoration-green-600 decoration-2">MLOps & Deployment:</div><div className="flex flex-wrap gap-2">{RESUME_DATA.skills.mlops.map(s => <span key={s}>• {s}</span>)}</div></div>
                    <div><div className="text-white mb-1 underline decoration-green-600 decoration-2">Tools:</div><div className="flex flex-wrap gap-2">{RESUME_DATA.skills.tools.map(s => <span key={s}>• {s}</span>)}</div></div>
                </div>
                <div className="mt-4 animate-pulse"><span className="text-blue-400">adil@macbook</span>:<span className="text-blue-300">~</span>$ <span className="w-2 h-4 bg-gray-500 inline-block align-middle"></span></div>
            </div>
        );

        const SafariContent = () => (
            <div className="flex flex-col h-full bg-gray-50 dark:bg-[#222]">
                <div className="bg-gray-100 dark:bg-[#333] p-2 border-b border-gray-300 dark:border-black flex items-center gap-4">
                    <div className="flex gap-2 text-gray-400"><div className="hover:bg-gray-300 rounded p-1"><Minus size={14}/></div><div className="hover:bg-gray-300 rounded p-1"><Maximize2 size={14}/></div></div>
                    <div className="flex-1 bg-white dark:bg-[#111] rounded-lg px-3 py-1 text-center text-xs text-gray-500 flex items-center justify-center gap-2 shadow-inner truncate"><Search size={12}/> adilshamim.me/projects</div>
                </div>
                <div className="flex-1 overflow-y-auto p-4 md:p-6">
                    <h2 className="text-xl md:text-2xl font-bold mb-6 dark:text-white">Featured Projects</h2>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                        {RESUME_DATA.projects.map((project, i) => (
                        <div key={i} className="bg-white dark:bg-[#333] rounded-xl shadow-sm p-4 border border-gray-200 dark:border-gray-700 hover:shadow-md transition-shadow">
                            <div className="flex justify-between items-start">
                                <a href={project.link} target="_blank" rel="noreferrer" className="group flex-1"><h3 className="font-bold text-base md:text-lg text-blue-600 dark:text-blue-400 mb-1 group-hover:underline truncate">{project.title}</h3></a>
                                <a href={project.link} target="_blank" rel="noreferrer"><Github size={16} className="text-gray-400 hover:text-black cursor-pointer transition-colors flex-shrink-0 ml-2"/></a>
                            </div>
                            <div className="flex flex-wrap gap-1 mb-3">{project.tech.map(t => (<span key={t} className="px-2 py-0.5 bg-gray-100 dark:bg-black text-gray-600 dark:text-gray-300 text-[10px] rounded-full border border-gray-300 dark:border-gray-600">{t}</span>))}</div>
                            <p className="text-sm text-gray-600 dark:text-gray-300 leading-snug line-clamp-3">{project.desc}</p>
                        </div>))}
                    </div>
                </div>
            </div>
        );

        const CalendarContent = () => (
            <div className="flex h-full bg-white text-gray-800">
                <div className="w-full p-6 overflow-y-auto">
                    <div className="flex items-center justify-between mb-6"><h2 className="text-2xl font-bold">Work Experience</h2><span className="text-red-500 font-semibold text-sm">Today</span></div>
                    <div className="border-l-2 border-red-200 ml-2 space-y-8">
                        {RESUME_DATA.experience.map((exp, i) => (
                            <div key={i} className="relative pl-6 pb-2">
                                <div className="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-red-500 border-4 border-white shadow-sm"></div>
                                <div className="text-xs text-gray-400 font-bold uppercase mb-1">{exp.date}</div>
                                <h3 className="text-lg font-bold text-gray-900">{exp.role}</h3>
                                <div className="text-sm font-medium text-gray-600 mb-2">{exp.company}</div>
                                <p className="text-sm text-gray-600 bg-gray-50 p-3 rounded-lg">{exp.desc}</p>
                            </div>
                        ))}
                    </div>
                    <div className="mt-8 pt-4 border-t">
                        <h2 className="text-lg font-bold mb-4">Certifications</h2>
                        <div className="grid grid-cols-1 gap-2">{RESUME_DATA.certifications.map((cert, idx) => (<div key={idx} className="flex items-center gap-3 p-2 hover:bg-gray-50 rounded-lg transition-colors"><Award size={18} className="text-yellow-500" /><span className="text-sm text-gray-700">{cert}</span></div>))}</div>
                    </div>
                </div>
            </div>
        );

        const MailContent = () => (
            <div className="flex flex-col md:flex-row h-full bg-white dark:bg-[#222] divide-y md:divide-y-0 md:divide-x divide-gray-200 dark:divide-gray-700">
                <div className="w-full md:w-1/3 p-2 bg-gray-50 dark:bg-[#1a1a1a] flex-shrink-0">
                    <div className="px-2 py-2 text-xs font-bold text-gray-400 uppercase">Inbox</div>
                    <div className="bg-blue-100 dark:bg-blue-900/30 p-3 rounded-lg mb-2 cursor-pointer">
                        <div className="font-bold text-sm dark:text-white">{RESUME_DATA.personal.name}</div>
                        <div className="text-xs text-gray-500 mb-1">New Opportunity?</div>
                        <div className="text-xs text-gray-400 line-clamp-2">Hi there! Thanks for checking out my portfolio. Feel free to reach out...</div>
                    </div>
                </div>
                <div className="flex-1 p-4 md:p-8 flex flex-col items-center justify-center text-center space-y-6 overflow-y-auto">
                    <div className="w-16 h-16 md:w-20 md:h-20 bg-gray-200 rounded-full flex items-center justify-center text-gray-400 mb-2"><Mail size={32} /></div>
                    <div><h2 className="text-xl font-bold dark:text-white">Contact Me</h2><p className="text-gray-500 text-sm mt-1">I am currently available for new opportunities.</p></div>
                    <div className="flex flex-col gap-1 text-sm text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-800/50 p-4 rounded-lg w-full max-w-xs mx-auto">
                        <div className="flex justify-between border-b border-gray-200 dark:border-gray-700 pb-2 mb-2"><span className="text-gray-400">Phone:</span><span className="font-medium">{RESUME_DATA.personal.phone}</span></div>
                        <div className="flex justify-between"><span className="text-gray-400">Location:</span><span className="font-medium text-right">{RESUME_DATA.personal.location}</span></div>
                    </div>
                    <div className="grid grid-cols-2 gap-3 w-full max-w-xs mx-auto">
                        <a href={`mailto:${RESUME_DATA.personal.email}`} className="flex items-center justify-center gap-2 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg text-xs font-medium transition-colors col-span-2"><Mail size={14} /> Send Email</a>
                        <a href={`https://linkedin.com/in/${RESUME_DATA.personal.linkedin}`} target="_blank" rel="noreferrer" className="flex items-center justify-center gap-2 bg-[#0077b5] hover:opacity-90 text-white py-2 rounded-lg text-xs font-medium transition-colors"><Linkedin size={14} /> LinkedIn</a>
                        <a href={`https://github.com/${RESUME_DATA.personal.github}`} target="_blank" rel="noreferrer" className="flex items-center justify-center gap-2 bg-gray-900 hover:bg-black text-white py-2 rounded-lg text-xs font-medium transition-colors"><Github size={14} /> GitHub</a>
                        <a href={`https://www.kaggle.com/${RESUME_DATA.personal.kaggle}`} target="_blank" rel="noreferrer" className="flex items-center justify-center gap-2 bg-[#20BEFF] hover:opacity-90 text-white py-2 rounded-lg text-xs font-medium transition-colors"><KaggleIcon size={14} /> Kaggle</a>
                        <a href={`https://x.com/${RESUME_DATA.personal.twitter}`} target="_blank" rel="noreferrer" className="flex items-center justify-center gap-2 bg-black hover:bg-gray-900 text-white py-2 rounded-lg text-xs font-medium transition-colors"><XIcon size={14} /> X (Twitter)</a>
                        <a href={RESUME_DATA.personal.medium} target="_blank" rel="noreferrer" className="flex items-center justify-center gap-2 bg-black hover:bg-gray-800 text-white py-2 rounded-lg text-xs font-medium transition-colors"><MediumIcon size={14} /> Medium</a>
                        <a href={`https://${RESUME_DATA.personal.website}`} target="_blank" rel="noreferrer" className="flex items-center justify-center gap-2 bg-gray-800 hover:bg-gray-900 text-white py-2 rounded-lg text-xs font-medium transition-colors col-span-2"><Globe size={14} /> {RESUME_DATA.personal.website}</a>
                    </div>
                </div>
            </div>
        );

        // --- Gemini AI Chat Component ---
        const MessagesContent = () => {
            const [messages, setMessages] = useState([
                { id: 1, sender: 'ai', text: "Hi there! I'm Adil's AI Assistant. Ask me anything about his experience, skills, or projects! ✨" }
            ]);
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            const handleSend = async () => {
                if (!input.trim()) return;

                const userMsg = { id: Date.now(), sender: 'user', text: input };
                setMessages(prev => [...prev, userMsg]);
                setInput('');
                setIsLoading(true);

                try {
                    const apiKey = "AIzaSyAHU-7MJMe_5c48N31ThbPeY6a3OGgcn6g"; // Runtime injected key
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                role: "user",
                                parts: [{ text: `You are an AI assistant for Adil Shamim, a Machine Learning Engineer. Answer questions based on this resume data: ${JSON.stringify(RESUME_DATA)}. Keep answers professional, concise, and friendly. User asked: ${input}` }]
                            }]
                        })
                    });
                    
                    const data = await response.json();
                    const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text || "I'm having trouble connecting right now. Please try again later.";
                    
                    setMessages(prev => [...prev, { id: Date.now() + 1, sender: 'ai', text: aiText }]);
                } catch (error) {
                    console.error(error);
                    setMessages(prev => [...prev, { id: Date.now() + 1, sender: 'ai', text: "Sorry, I encountered an error. Please try again." }]);
                } finally {
                    setIsLoading(false);
                }
            };

            const handleKeyDown = (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleSend();
                }
            };

            return (
                <div className="flex flex-col h-full bg-white dark:bg-[#1e1e1e] text-gray-800 dark:text-gray-200">
                    {/* Chat Area */}
                    <div className="flex-1 overflow-y-auto p-4 space-y-4">
                        {messages.map((msg) => (
                            <div key={msg.id} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>
                                <div className={`max-w-[80%] rounded-2xl px-4 py-2 text-sm ${
                                    msg.sender === 'user' 
                                        ? 'bg-blue-500 text-white rounded-br-none' 
                                        : 'bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-bl-none'
                                }`}>
                                    {msg.text}
                                </div>
                            </div>
                        ))}
                        {isLoading && (
                            <div className="flex justify-start">
                                <div className="bg-gray-200 dark:bg-gray-700 rounded-2xl rounded-bl-none px-4 py-3 flex gap-1">
                                    <div className="w-2 h-2 bg-gray-400 rounded-full typing-dot"></div>
                                    <div className="w-2 h-2 bg-gray-400 rounded-full typing-dot"></div>
                                    <div className="w-2 h-2 bg-gray-400 rounded-full typing-dot"></div>
                                </div>
                            </div>
                        )}
                        <div ref={messagesEndRef} />
                    </div>

                    {/* Input Area */}
                    <div className="p-3 bg-gray-50 dark:bg-[#2d2d2d] border-t border-gray-200 dark:border-gray-700 flex items-center gap-2">
                        <input 
                            type="text" 
                            value={input}
                            onChange={(e) => setInput(e.target.value)}
                            onKeyDown={handleKeyDown}
                            placeholder="Ask about Adil's skills..."
                            className="flex-1 bg-white dark:bg-[#1a1a1a] border border-gray-300 dark:border-gray-600 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 dark:text-white"
                        />
                        <button 
                            onClick={handleSend}
                            disabled={!input.trim() || isLoading}
                            className="p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-full disabled:opacity-50 transition-colors"
                        >
                            {isLoading ? <Sparkles size={18} className="animate-pulse"/> : <Send size={18} />}
                        </button>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [time, setTime] = useState(new Date());
            const [activeWindow, setActiveWindow] = useState(null);
            const [openApps, setOpenApps] = useState([{ id: 'finder', zIndex: 1 }]);
            const [minimizedApps, setMinimizedApps] = useState([]);
            const [highestZ, setHighestZ] = useState(2);

            useEffect(() => {
                const timer = setInterval(() => setTime(new Date()), 60000);
                return () => clearInterval(timer);
            }, []);

            const apps = [
                { id: 'finder', title: 'Finder - About Me', icon: <User size={24} className="text-white"/>, color: 'bg-blue-500', content: <FinderContent />, width: '800px', height: '500px' },
                { id: 'safari', title: 'Safari - Projects', icon: <Globe size={24} className="text-white"/>, color: 'bg-blue-400', content: <SafariContent />, width: '850px', height: '600px' },
                { id: 'terminal', title: 'Terminal - Skills', icon: <Terminal size={24} className="text-white"/>, color: 'bg-gray-800', content: <TerminalContent />, width: '600px', height: '400px' },
                { id: 'calendar', title: 'Calendar - Experience', icon: <CalendarIcon size={24} className="text-red-500"/>, color: 'bg-white border border-gray-200', content: <CalendarContent />, width: '700px', height: '550px' },
                { id: 'messages', title: 'Messages - AI Chat', icon: <MessageCircle size={24} className="text-white"/>, color: 'bg-green-500', content: <MessagesContent />, width: '400px', height: '600px' },
                { id: 'mail', title: 'Mail - Contact', icon: <Mail size={24} className="text-white"/>, color: 'bg-blue-600', content: <MailContent />, width: '600px', height: '450px' },
            ];

            const openApp = (appId) => {
                const existing = openApps.find(app => app.id === appId);
                if (minimizedApps.includes(appId)) {
                    setMinimizedApps(minimizedApps.filter(id => id !== appId));
                    bringToFront(appId);
                    return;
                }
                if (existing) {
                    bringToFront(appId);
                } else {
                    setOpenApps([...openApps, { id: appId, zIndex: highestZ + 1 }]);
                    setHighestZ(prev => prev + 1);
                    setActiveWindow(appId);
                }
            };

            const closeApp = (appId) => {
                setOpenApps(openApps.filter(app => app.id !== appId));
                setMinimizedApps(minimizedApps.filter(id => id !== appId));
                if (activeWindow === appId) setActiveWindow(null);
            };

            const minimizeApp = (appId) => {
                if (!minimizedApps.includes(appId)) {
                    setMinimizedApps([...minimizedApps, appId]);
                    setActiveWindow(null);
                }
            };

            const bringToFront = (appId) => {
                setOpenApps(openApps.map(app => app.id === appId ? { ...app, zIndex: highestZ + 1 } : app));
                setHighestZ(prev => prev + 1);
                setActiveWindow(appId);
            };

            const formatTime = (date) => date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
            const formatDate = (date) => date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });

            return (
                <div className="h-screen w-screen overflow-hidden bg-center bg-cover relative select-none font-sans" style={{ backgroundImage: "url('https://4kwallpapers.com/images/walls/thumbs_3t/1455.jpg')" }}>
                    <div className="h-7 bg-white/20 dark:bg-black/40 backdrop-blur-md flex items-center justify-between px-2 md:px-4 text-white text-xs shadow-sm relative z-50">
                        <div className="flex items-center gap-2 md:gap-4"><Command size={14} fill="white" /><span className="font-bold">Adil OS</span><span className="hidden sm:inline">File</span><span className="hidden sm:inline">Edit</span><span className="hidden sm:inline">View</span><span className="hidden sm:inline">Go</span><span className="hidden sm:inline">Window</span><span className="hidden sm:inline">Help</span></div>
                        <div className="flex items-center gap-2 md:gap-4"><Battery size={16} className="hidden md:block"/><Wifi size={16} /><Search size={14} className="hidden md:block"/><span className="hidden sm:inline">{formatDate(time)}</span><span>{formatTime(time)}</span></div>
                    </div>
                    <div className="relative h-[calc(100vh-28px)] w-full">
                        {/* Desktop Icons REMOVED */}
                        {openApps.map(openAppInst => {
                            const appData = apps.find(a => a.id === openAppInst.id);
                            if (!appData) return null;
                            return (<DraggableWindow key={openAppInst.id} app={appData} isActive={activeWindow === openAppInst.id} zIndex={openAppInst.zIndex} onClose={closeApp} onMinimize={minimizeApp} onFocus={bringToFront} isMinimized={minimizedApps.includes(openAppInst.id)} />);
                        })}
                        
                        {/* Improved Dock for Mobile */}
                        <div className="absolute bottom-8 left-0 right-0 flex justify-center z-[100] px-4 pb-safe">
                            <div className="flex items-end gap-3 px-4 pb-3 pt-4 bg-white/40 dark:bg-black/50 backdrop-blur-xl border border-white/20 rounded-3xl shadow-2xl overflow-x-auto max-w-full">
                                {apps.map((app) => {
                                const isOpen = openApps.find(o => o.id === app.id);
                                const isMinimized = minimizedApps.includes(app.id);
                                return (
                                    <div key={app.id} className="group relative flex flex-col items-center gap-1 min-w-[48px]">
                                        <div className="hidden md:block absolute -top-10 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-800 text-white text-[10px] px-2 py-1 rounded shadow-lg pointer-events-none whitespace-nowrap">{app.title.split(' - ')[1]}</div>
                                        <button onClick={() => openApp(app.id)} className={`w-12 h-12 md:w-14 md:h-14 rounded-xl flex items-center justify-center shadow-lg transition-all duration-200 hover:-translate-y-2 active:scale-95 ${app.color} ${activeWindow === app.id && !isMinimized ? 'ring-2 ring-white/50' : ''} ${isMinimized ? 'opacity-70 grayscale-[0.5]' : ''}`}>{app.icon}</button>
                                        <div className={`w-1 h-1 rounded-full bg-white/80 shadow-sm transition-opacity ${isOpen ? 'opacity-100' : 'opacity-0'}`}></div>
                                    </div>
                                )})}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
